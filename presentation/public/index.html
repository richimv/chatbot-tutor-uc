<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tutor Académico UC - Búsqueda de Cursos</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/search.css">
    <link rel="stylesheet" href="css/browse.css">
    <link rel="stylesheet" href="css/results.css">
    <link rel="stylesheet" href="css/detail-view.css">
    <link rel="stylesheet" href="css/header.css">
    <link rel="stylesheet" href="css/modal.css">
    <link rel="stylesheet" href="css/chat.css">
    <link rel="stylesheet" href="css/dark-theme-enhancements.css"> <!--Mejoras tema oscuro -->
    <link rel="stylesheet" href="css/3d-effects.css"> <!--Efectos 3D universales -->
    <link rel="stylesheet" href="css/header-sticky-dark.css"> <!--Header sticky tema oscuro -->
    <link rel="stylesheet" href="css/logo-theme.css"> <!--Sistema de logo dual -->
    <!--Añadir Font Awesome para que se vean los íconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Añadir Favicon para el ícono de la pestaña -->
    <link rel="icon" href="../assets/logo.png" type="image/png">
    <!-- Los estilos del chat se cargan dinámicamente -->
</head>

<body>
    <header class="main-header">
        <div class="logo">
            <!-- Logo oscuro para tema claro -->
            <img src="../assets/logo-dark.png" alt="Logo UC" class="logo-img logo-dark">
            <!-- Logo claro para tema oscuro -->
            <img src="../assets/logo-light.png" alt="Logo UC" class="logo-img logo-light">
            <span class="logo-text">Tutor Académico</span> <!-- ✅ MEJORA: Texto envuelto para control responsive -->
        </div>
        <div class="header-nav">
            <a href="#" class="nav-link nav-home-button" title="Ir al inicio">
                <i class="fas fa-home"></i>
            </a>
            <button id="theme-toggle" class="theme-toggle-btn" title="Cambiar tema"
                aria-label="Cambiar entre tema claro y oscuro">
                <i class="fas fa-sun" id="theme-icon"></i>
            </button>
            <div id="user-session-controls">
                <!-- Estado de carga inicial -->
                <span class="loading-user">Cargando...</span>
            </div>
        </div>
    </header>

    <div class="main-container">
        <section class="hero">
            <h2>Explora. Aprende. Domina.</h2>
            <p>Encuentra al instante cursos, materiales y horarios de la universidad.</p>
        </section>

        <section class="search-section">
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="Buscar por curso, tema o docente...">
                <button id="searchButton" class="btn-primary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                        viewBox="0 0 16 16">
                        <path
                            d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z" />
                    </svg>
                    Buscar
                </button>
            </div>
        </section>

        <div id="content-container">
            <nav id="breadcrumbs" class="breadcrumbs hidden" aria-label="breadcrumb"></nav>
            <div id="browse-container"></div>
            <div id="results-container" class="hidden"></div>
        </div>
    </div>

    <!-- MODAL DE INVITACIÓN PARA FUNCIONES PROTEGIDAS -->
    <div id="login-prompt-modal" class="modal modal-overlay" style="display: none;">
        <div class="modal-content auth-prompt-modal">
            <div class="modal-header">
                <h2>Acceso Exclusivo para Miembros</h2>
                <button class="modal-close-btn modal-close" id="login-prompt-close-btn">×</button>
            </div>
            <div class="modal-body">
                <!-- ✅ MEJORA: Mensaje más claro y centrado en los beneficios reales. -->
                <i class="fas fa-lock auth-prompt-icon"></i>
                <p class="auth-prompt-main-text">Para acceder a este contenido, necesitas una cuenta.</p>
                <div class="auth-prompt-benefits">
                    <p>Al registrarte, desbloquearás:</p>
                    <ul>
                        <li><i class="fas fa-book-open"></i> Acceso a toda la <strong>biblioteca de materiales</strong>
                            y PDFs.</li>
                        <li><i class="fas fa-robot"></i> Uso del <strong>Tutor IA</strong> como guía para tus consultas
                            académicas.</li>
                    </ul>
                </div>
            </div>
            <div class="modal-footer">
                <a href="/register.html" class="btn-secondary">Registrarse Ahora</a>
                <a href="/login.html" class="btn-primary">Iniciar Sesión</a>
            </div>
        </div>
    </div>

    <!-- ✅ NUEVO: Modal para filtros en móvil -->
    <div id="filter-modal" class="modal filter-modal modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Filtrar Resultados</h2>
                <button class="modal-close-btn filter-modal-close modal-close">×</button>
            </div>
            <div class="modal-body" id="filter-modal-body"></div>
        </div>
    </div>

    <!-- ✅ NUEVO: Modal de Confirmación Genérico -->
    <div id="confirmation-modal" class="modal modal-overlay" style="display: none; z-index: 2000;">
        <div class="modal-content" style="max-width: 400px;">
            <div class="modal-header">
                <h2 id="confirmation-modal-title">Confirmación</h2>
                <button class="modal-close-btn modal-close">×</button>
            </div>
            <div class="modal-body">
                <p id="confirmation-modal-message">¿Estás seguro de realizar esta acción?</p>
            </div>
            <div class="modal-footer">
                <button id="confirmation-modal-cancel" class="btn-secondary">Cancelar</button>
                <button id="confirmation-modal-confirm" class="btn-primary">Confirmar</button>
            </div>
        </div>
    </div>

    <!-- Visor Modal para PDFs -->
    <div id="pdf-viewer-modal" class="pdf-modal modal-overlay">
        <div class="pdf-modal-content">
            <div class="pdf-modal-header">
                <h3 id="pdf-modal-title">Visor de Documentos</h3>
                <button id="pdf-modal-close-btn" class="pdf-modal-close-btn modal-close"
                    aria-label="Cerrar visor">&times;</button>
            </div>
            <div class="pdf-modal-body">
                <div class="pdf-loading-spinner"></div>
                <iframe id="pdf-iframe" src="" frameborder="0" title="Visor de PDF"></iframe>
            </div>
        </div>
    </div>

    <!-- ✅ CORRECCIÓN CRÍTICA: Cargar scripts en el orden correcto y app.js al final -->
    <script src="js/theme-toggle.js"></script> <!-- ✅ NUEVO: Theme toggle -->
    <script src="js/ui/components.js"></script> <!-- Componentes de UI primero -->
    <script src="js/services/authApiService.js"></script> <!-- Servicio de API de Auth -->
    <script src="js/services/analyticsApiService.js"></script> <!-- ✅ NUEVO: Servicio de API de Analytics -->
    <script src="js/sessionManager.js"></script> <!-- Gestor de sesión -->
    <script src="js/search.js"></script> <!-- Lógica de búsqueda -->
    <script src="js/chat.js"></script> <!-- Lógica del chat -->
    <script src="js/ui/confirmationModal.js"></script> <!-- ✅ NUEVO: Modal de confirmación -->
    <script src="js/app.js"></script> <!-- Archivo principal de inicialización, al final -->

</body>

</html>