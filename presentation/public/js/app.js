/**
 * app.js
 * 
 * Punto de entrada principal para la inicializaci√≥n de componentes de JavaScript.
 * Detecta qu√© componentes son necesarios en la p√°gina actual y los instancia.
 */

document.addEventListener('DOMContentLoaded', () => {
    console.log('üöÄ DOM completamente cargado. Inicializando componentes...');

    // --- Inicializaci√≥n para la p√°gina de B√∫squeda (index.html) ---
    if (document.getElementById('searchButton')) {
        console.log('üîé P√°gina de b√∫squeda detectada. Inicializando componentes.');
        
        // ‚úÖ CORRECCI√ìN: Se instancia SearchComponent para activar la funcionalidad de b√∫squeda.
        // El componente se auto-configura al ser creado.
        new SearchComponent();
        window.chatComponent = new ChatComponent();
    }

    // --- Inicializaci√≥n para la p√°gina de Admin (admin.html) ---
    // Nota: admin.js se auto-inicializa, pero podr√≠amos moverlo aqu√≠ para consistencia.
    if (document.querySelector('.admin-container')) {
        console.log('‚öôÔ∏è P√°gina de admin detectada.');
        // new AdminManager(); // Descomentar si movemos la inicializaci√≥n de admin.js aqu√≠.
    }
});

// --- Funciones globales para interactuar con el chat desde otros componentes ---
    
// Abre el widget de chat
window.openChat = function() {
    if (window.chatComponent) window.chatComponent.openAndAsk('');
};

// Abre el widget de chat con una pregunta espec√≠fica
window.askAboutCourse = function(courseName) {
    if (window.chatComponent) window.chatComponent.openAndAsk(`H√°blame m√°s sobre el curso "${courseName}"`);
};

// ‚úÖ CORRECCI√ìN: A√±adir la funci√≥n que faltaba para preguntar sobre un tema.
window.askAboutTopic = function(topic) {
    if (window.chatComponent) window.chatComponent.openAndAsk(`Expl√≠came sobre "${topic}"`);
};